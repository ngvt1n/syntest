<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SYNTEST ‚Äì Participant</title>

  <!-- Use unified app.css -->
  <link rel="stylesheet" href="{{ url_for('static', filename='app.css') }}" />
  
  <style>
    /* Dashboard-specific layout only */
    
    .dashboard-app {
      display: grid;
      grid-template-columns: 256px 1fr;
      min-height: 100vh;
      background: var(--bg-secondary);
    }

    .dashboard-sidebar {
      background: var(--bg-primary);
      border-right: 1px solid var(--border-primary);
      padding: var(--spacing-3xl) var(--spacing-lg) var(--spacing-xl) var(--spacing-2xl);
    }

    .dashboard-main {
      padding: var(--spacing-lg) var(--spacing-4xl) var(--spacing-5xl);
    }

    .dashboard-topbar {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: var(--spacing-lg);
      margin-bottom: var(--spacing-md);
    }

    .toplink {
      color: var(--text-primary);
      text-decoration: none;
      font-weight: 500;
    }

    .toplink:hover {
      text-decoration: underline;
    }

    .section {
      margin-top: var(--spacing-lg);
      margin-bottom: var(--spacing-3xl);
    }

    .section-title {
      font-size: var(--font-size-3xl);
      letter-spacing: 0.02em;
      font-weight: 900;
      margin: var(--spacing-2xl) 0 var(--spacing-lg);
    }

    .detail-row {
      display: grid;
      grid-template-columns: 520px 210px 210px 210px;
      gap: var(--spacing-lg);
      align-items: stretch;
    }

    .card-detail {
      display: flex;
      gap: var(--spacing-lg);
      padding: var(--spacing-2xl);
    }

    .avatar {
      width: 60px;
      height: 60px;
      display: grid;
      place-items: center;
      font-size: 38px;
      background: var(--bg-primary);
      border-radius: var(--radius-xl);
      flex-shrink: 0;
    }

    .detail-grid {
      display: grid;
      gap: var(--spacing-sm);
      align-content: center;
    }

    .kv .k {
      color: var(--text-secondary);
      margin-right: var(--spacing-sm);
    }

    .kv .v {
      font-weight: 700;
    }

    .stat {
      padding: var(--spacing-lg) var(--spacing-xl);
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .stat-label {
      color: var(--text-secondary);
      font-size: var(--font-size-xs);
      margin-bottom: var(--spacing-md);
    }

    .stat-value {
      font-size: var(--font-size-3xl);
      font-weight: 800;
    }

    .stat-right {
      line-height: 1.05;
    }

    .performance-row {
      display: flex;
      gap: var(--spacing-3xl);
      align-items: flex-end;
    }

    .mini-chart {
      width: 260px;
      height: 96px;
      border-radius: var(--radius-xl);
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-lg);
      background: var(--bg-primary);
    }

    .mini-chart::before {
      content: "";
      position: absolute;
      inset: -20% -10% 0 -10%;
      background:
        radial-gradient(120px 48px at 30% 70%, rgba(0,0,0,.10), rgba(0,0,0,0) 60%),
        radial-gradient(120px 48px at 60% 45%, rgba(0,0,0,.12), rgba(0,0,0,0) 60%);
      filter: blur(10px);
      opacity: .32;
    }

    .mini-chart.peach {
      background: linear-gradient(180deg, #ffe9d9 0%, #ffffff 62%);
    }

    .mini-chart.rose {
      background: linear-gradient(180deg, #ffe3e3 0%, #ffffff 62%);
    }

    .mini-chart.sky {
      background: linear-gradient(180deg, #e5f7ff 0%, #ffffff 62%);
    }

    .note-card {
      padding: var(--spacing-lg);
    }

    .note-text {
      margin: 0;
      font-size: var(--font-size-2xl);
      font-weight: 600;
      color: var(--text-primary);
    }

    /* Icon styling */
    .ico {
      width: 20px;
      height: 20px;
      color: var(--text-secondary);
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .detail-row {
        grid-template-columns: 1fr 1fr;
      }
    }

    @media (max-width: 820px) {
      .dashboard-app {
        grid-template-columns: 1fr;
      }

      .dashboard-sidebar {
        border-right: none;
        border-bottom: 1px solid var(--border-primary);
      }

      .detail-row {
        grid-template-columns: 1fr;
      }

      .performance-row {
        flex-wrap: wrap;
      }
    }
  </style>
</head>

<body>
  <div class="dashboard-app">

    <!-- ===== Sidebar ===== -->
    <aside class="dashboard-sidebar">
      <div class="brand">SYNTEST</div>

      <nav class="side-nav">
        <!-- Pre-Screening -->
        <a class="nav-item" href="{{ url_for('flow', step=0) }}">Pre-Screening Test</a>

        <!-- Color tests -->
        <a class="nav-item" href="{{ url_for('letter_color_test') }}">Letter Color Test</a>
        <a class="nav-item" href="{{ url_for('number_color_test') }}">Number Color Test</a>
        <a class="nav-item" href="{{ url_for('word_color_test') }}">Word Color Test</a>
        <a class="nav-item" href="{{ url_for('speed_congruency_instructions') }}">Speed Congruency</a>

        <!-- Flavor -->
        <a class="nav-item" href="{{ url_for('word_color_test') }}">
          <svg viewBox="0 0 24 24" class="ico" aria-hidden="true">
            <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="1.8"/>
            <line x1="12" y1="3" x2="12" y2="12" stroke="currentColor" stroke-width="1.8"/>
            <line x1="19" y1="8" x2="12" y2="12" stroke="currentColor" stroke-width="1.8"/>
          </svg>
          <span>Flavor Test</span>
        </a>

        <!-- Association -->
        <a class="nav-item" href="{{ url_for('word_color_test') }}">
          <svg viewBox="0 0 24 24" class="ico" aria-hidden="true">
            <rect x="3" y="6" width="4.5" height="12" fill="currentColor"/>
            <rect x="9.75" y="6" width="4.5" height="12" fill="currentColor"/>
            <rect x="16.5" y="6" width="4.5" height="12" fill="currentColor"/>
          </svg>
          <span>Association</span>
        </a>

        <!-- Analytics -->
        <a class="nav-item" href="#">
          <svg viewBox="0 0 24 24" class="ico" aria-hidden="true">
            <path d="M4 15h4v6H4zM10 9h4v12h-4zM16 3h4v18h-4z" fill="currentColor"/>
          </svg>
          <span>Analytics</span>
        </a>

        <!-- Settings -->
        <a class="nav-item" href="#">
          <svg viewBox="0 0 24 24" class="ico" aria-hidden="true">
            <path d="M12 15a3 3 0 1 0 0-6m8.5 3a8.5 8.5 0 0 1-.1 1l2.1 1.7-2 3.5-2.6-1a8.5 8.5 0 0 1-1.7 1l-.4 2.7H10.2l-.4-2.7a8.5 8.5 0 0 1-1.7-1l-2.6 1-2-3.5 2.1-1.7a8.5 8.5 0 0 1 0-2L1.5 9.3l2-3.5 2.6 1a8.5 8.5 0 0 1 1.7-1l.4-2.7h4.6l.4 2.7a8.5 8.5 0 0 1 1.7 1l2.6-1 2 3.5-2.1 1.7c.1.3.1.7.1 1Z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Settings</span>
        </a>
      </nav>
    </aside>

    <!-- ===== Main ===== -->
    <main class="dashboard-main">
      <header class="dashboard-topbar">
        <a class="toplink" href="#">About This Study</a>
        <button class="btn btn-primary">Your Account</button>
      </header>

      <section class="section">
        <h2 class="section-title">PARTICIPANT DETAIL</h2>

        <div class="detail-row">
          <!-- Participant card -->
          <article class="card card-detail">
            <div class="avatar" aria-hidden="true">üë©üèº‚Äçü¶∞</div>
            <div class="detail-grid">
              <div class="kv"><span class="k">Name:</span> <span class="v">{{ user.name if user else '‚Äî' }}</span></div>
              <div class="kv"><span class="k">Age:</span> <span class="v">{{ user.age if user else '‚Äî' }}</span></div>
              <div class="kv"><span class="k">Country:</span> <span class="v">{{ user.country if user else '‚Äî' }}</span></div>
              <div class="kv"><span class="k">Date joined:</span> <span class="v">{{ user.created_at.strftime('%Y-%m-%d') if user else '‚Äî' }}</span></div>
            </div>
          </article>

          <!-- Small stats -->
          <article class="card stat">
            <div class="stat-label">Tests Completed</div>
            <div class="stat-value">{{ tests_completed }}</div>
          </article>

          <article class="card stat">
            <div class="stat-label">Tests Pending</div>
            <div class="stat-value">{{ tests_pending }}</div>
          </article>

          <article class="card stat">
            <div class="stat-label">Completion</div>
            <div class="stat-value stat-right">{{ completion_percentage }}%</div>
          </article>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">PERFORMANCE</h2>
        <div class="performance-row">
          <div class="mini-chart peach"></div>
          <div class="mini-chart rose"></div>
          <div class="mini-chart sky"></div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">RESEARCHER'S NOTES</h2>
        <div class="card note-card">
          <p class="note-text">Edge case!</p>
        </div>

        <div class="actions">
          <button class="btn btn-ghost">Export</button>
          <button class="btn btn-ghost">View raw</button>
        </div>
      </section>
    </main>
  </div>
</body>
</html>
