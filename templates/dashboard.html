<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SYNTEST ‚Äì Participant</title>

  <!-- Use unified app.css -->
  <link rel="stylesheet" href="{{ url_for('static', filename='app.css') }}" />
  
  <style>
    /* Dashboard-specific layout only */
    
    .dashboard-grid {
      display: grid;
      grid-template-columns: minmax(15%, 265px) 1fr;
      min-height: 100vh;
      background: var(--bg-secondary);
    }

    .dashboard-sidebar {
      background: var(--bg-primary);
      border-right: 1px solid var(--border-primary);
      padding: var(--spacing-3xl) var(--spacing-lg) var(--spacing-xl) var(--spacing-2xl);
    }

    .dashboard-row {
      display: flex; 
      flex-direction: row;
      gap: var(--spacing-sm); 
      flex-wrap: wrap;
    }

    .section {
      margin-top: var(--spacing-lg);
      margin-bottom: var(--spacing-3xl);
    }

    .section-title {
      font-size: var(--font-size-3xl);
      letter-spacing: 0.02em;
      font-weight: 900;
      margin: var(--spacing-2xl) 0 var(--spacing-lg);
    }

    .avatar {
      width: 60px;
      height: 60px;
      display: grid;
      place-items: center;
      font-size: 38px;
      background: var(--bg-primary);
      border-radius: var(--radius-xl);
      flex-shrink: 0;
    }

    .detail-grid {
      display: grid;
      gap: var(--spacing-sm);
      align-content: center;
    }

    .kv .k {
      color: var(--text-secondary);
      margin-right: var(--spacing-sm);
    }

    .kv .v {
      font-weight: 700;
    }

    .stat {
      padding: var(--spacing-lg) var(--spacing-xl);
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .stat-label {
      color: var(--text-secondary);
      font-size: var(--font-size-xs);
      margin-bottom: var(--spacing-md);
    }

    .stat-value {
      font-size: var(--font-size-3xl);
      font-weight: 800;
    }

    .stat-right {
      line-height: 1.05;
    }

    .mini-chart {
      border-radius: var(--radius-xl);
      position: relative;
      overflow: hidden;
      background: var(--bg-primary);
    }

    .mini-chart::before {
      content: "";
      position: absolute;
      inset: -20% -10% 0 -10%;
      background:
        radial-gradient(120px 48px at 30% 70%, rgba(0,0,0,.10), rgba(0,0,0,0) 60%),
        radial-gradient(120px 48px at 60% 45%, rgba(0,0,0,.12), rgba(0,0,0,0) 60%);
      filter: blur(10px);
      opacity: .32;
    }

    .mini-chart.peach {
      background: linear-gradient(180deg, #ffe9d9 0%, #ffffff 62%);
    }

    .mini-chart.rose {
      background: linear-gradient(180deg, #ffe3e3 0%, #ffffff 62%);
    }

    .mini-chart.sky {
      background: linear-gradient(180deg, #e5f7ff 0%, #ffffff 62%);
    }

    /* Icon styling */
    .ico {
      width: 20px;
      height: 20px;
      color: var(--text-secondary);
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .dashboard-row {
        flex-direction: column;
      }
    }

    @media (max-width: 820px) {
      .dashboard-app {
        grid-template-columns: 1fr;
      }

      .dashboard-sidebar {
        border-right: none;
        border-bottom: 1px solid var(--border-primary);
      }
    }
  </style>
</head>

<body>
  <div class="dashboard-grid">

    <!-- ===== Sidebar ===== -->
    <aside class="dashboard-sidebar">
      <div href="/" class="brand" style="margin-left: var(--spacing-sm); margin-bottom: var(--spacing-2xl);">SYNTEST</div>

      <nav class="side-nav">
        <!-- Pre-Screening -->
        <a class="nav-item" href="{{ url_for('flow', step=0) }}">Pre-Screening Test</a>

        <!-- Color tests -->
        <a class="nav-item" href="{{ url_for('letter_color_test') }}">Letter Color Test</a>
        <a class="nav-item" href="{{ url_for('number_color_test') }}">Number Color Test</a>
        <a class="nav-item" href="{{ url_for('word_color_test') }}">Word Color Test</a>
        <a class="nav-item" href="{{ url_for('speed_congruency_instructions') }}">Speed Congruency</a>

        <!-- Flavor -->
        <a class="nav-item" href="{{ url_for('word_color_test') }}">
          <span>Flavor Test</span>
        </a>

        <!-- Association -->
        <a class="nav-item" href="{{ url_for('word_color_test') }}">
          <span>Association</span>
        </a>

        <!-- Analytics -->
        <a class="nav-item" href="#">
          <span>Analytics</span>
        </a>

        <!-- Settings -->
        <a class="nav-item" href="#">
          <span>Settings</span>
        </a>
      </nav>
    </aside>

    <!-- ===== Main ===== -->
    <main class="container">

      <section class="section">
        <h2 class="section-title">PARTICIPANT DETAIL</h2>

        <div class="dashboard-row">
          <!-- Participant card -->
          <article class="card">
            <div class="avatar" aria-hidden="true">üë©üèº‚Äçü¶∞</div>
            <div class="flex flex-gap-sm flex-col">
              <div class="kv"><span class="k">Name:</span> <span class="v">{{ user.name if user else '‚Äî' }}</span></div>
              <div class="kv"><span class="k">Age:</span> <span class="v">{{ user.age if user else '‚Äî' }}</span></div>
              <div class="kv"><span class="k">Country:</span> <span class="v">{{ user.country if user else '‚Äî' }}</span></div>
              <div class="kv"><span class="k">Date joined:</span> <span class="v">{{ user.created_at.strftime('%Y-%m-%d') if user else '‚Äî' }}</span></div>
            </div>
          </article>

          <!-- Small stats -->
          <article class="card stat">
            <div class="stat-label">Tests Completed</div>
            <div class="stat-value">{{ tests_completed }}</div>
          </article>

          <article class="card stat">
            <div class="stat-label">Tests Pending</div>
            <div class="stat-value">{{ tests_pending }}</div>
          </article>

          <article class="card stat">
            <div class="stat-label">Completion</div>
            <div class="stat-value stat-right">{{ completion_percentage }}%</div>
          </article>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">PERFORMANCE</h2>
        <div class="flex flex-gap-md flex-row">
          <div class="card mini-chart peach"></div>
          <div class="card mini-chart rose"></div>
          <div class="card mini-chart sky"></div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">RESEARCHER'S NOTES</h2>
        <!-- <div class="card note-card"> -->
        <!--   <p class="note-text">Edge case!</p> -->
        <!-- </div> -->

        <div class="actions">
          <button class="btn btn-ghost">Export</button>
          <button class="btn btn-ghost">View raw</button>
        </div>
      </section>
    </main>
  </div>
</body>
</html>
